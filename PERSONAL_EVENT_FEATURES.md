# 个人事件管理功能

## 功能概述

在活动详情页的"我的参与"tab中，用户现在可以对自己添加的个人事件进行编辑和删除操作。采用现代化的卡片设计风格，与整体应用风格保持一致。操作按钮采用点击展开的交互方式，保持界面整洁。

## 功能特性

### 1. 交互方式
- **点击展开**：点击事件卡片展开操作按钮，再次点击收起
- **视觉提示**：展开指示器显示当前状态
- **单一展开**：同时只能展开一个事件的操作按钮
- **自动收起**：点击其他事件时自动收起当前展开的按钮

### 2. 编辑功能
- **编辑按钮**：展开后显示编辑按钮
- **编辑弹窗**：点击编辑按钮打开编辑弹窗，预填充现有数据
- **表单验证**：确保所有必填字段都已填写
- **成功动画**：编辑成功后显示动画效果和成功提示

### 3. 删除功能
- **删除按钮**：展开后显示删除按钮
- **确认对话框**：点击删除按钮会弹出确认对话框，防止误删
- **删除动画**：删除前显示抖动动画，删除后显示成功提示

### 4. 权限控制
- **用户权限**：只有用户自己添加的事件（`isUserAdded: true`）才显示展开指示器
- **系统事件**：系统预设的事件不显示展开指示器

### 5. 用户体验
- **现代化设计**：采用渐变背景、圆角按钮、阴影效果
- **动画效果**：展开/收起、按钮悬停、点击、成功、删除等动画效果
- **视觉反馈**：编辑按钮为绿色渐变，删除按钮为橙色渐变
- **状态指示**：展开指示器显示当前展开状态

## 设计风格

### 整体风格
- **现代化卡片**：圆角、阴影、渐变背景
- **一致性**：与账户页面、活动列表等保持一致的视觉风格
- **响应式**：适配不同屏幕尺寸

### 交互设计
- **点击展开**：点击卡片展开操作按钮
- **展开指示器**：右上角显示展开状态指示器
- **视觉反馈**：展开时卡片上移、阴影加深、边框高亮
- **平滑动画**：所有展开/收起操作都有平滑动画

### 操作按钮设计
- **简洁优雅**：采用扁平化设计，去除过度装饰
- **柔和色彩**：编辑按钮使用柔和的绿色系 (#059669)，删除按钮使用柔和的红色系 (#dc2626)
- **浅色背景**：使用浅色背景配合深色文字，提高可读性
- **微妙边框**：淡色边框增强边界感但不突兀
- **轻量阴影**：悬停时添加轻微阴影，增强层次感
- **图标+文字**：每个按钮包含SVG图标和文字说明
- **平滑过渡**：所有状态变化都有平滑的过渡动画

### 操作区域设计
- **无框设计**：去除外框，让按钮直接融入卡片设计
- **透明背景**：透明背景保持视觉连续性
- **适中间距**：合理的按钮间距
- **简洁布局**：按钮直接排列，无额外装饰

### 动画效果
- **展开动画**：操作按钮区域从上方滑入
- **指示器动画**：展开指示器旋转动画
- **卡片动画**：展开时卡片上移和阴影变化
- **按钮动画**：悬停缩放、点击反馈
- **成功动画**：编辑成功后显示成功动画
- **删除动画**：删除前显示抖动动画

## 使用方法

### 编辑事件
1. 进入活动详情页
2. 切换到"我的参与"tab
3. 点击要编辑的事件卡片（展开操作按钮）
4. 点击"编辑"按钮
5. 在弹窗中修改事件信息
6. 点击确认保存

### 删除事件
1. 进入活动详情页
2. 切换到"我的参与"tab
3. 点击要删除的事件卡片（展开操作按钮）
4. 点击"删除"按钮
5. 在确认对话框中点击"删除"

### 收起操作按钮
- 点击已展开的事件卡片可以收起操作按钮
- 点击其他事件卡片会自动收起当前展开的按钮

## 技术实现

### 组件更新
- **PersonalEventDialog**：支持编辑模式，可预填充数据
- **活动详情页**：添加点击展开逻辑和编辑删除功能
- **SVG图标**：创建了编辑和删除的SVG图标

### 数据结构
```typescript
interface Stage {
  id: number;
  name: string;
  time: string;
  description: string;
  thumbnail: string;
  progress: number;
  records: string[];
  isUserAdded: boolean; // 标识是否为用户添加
}
```

### 状态管理
- `expandedStageId`：当前展开的事件ID
- `editingStage`：当前编辑的事件数据
- `showEditDialog`：控制编辑弹窗显示
- `userStages`：计算属性，过滤出用户添加的事件

## 样式设计

### 卡片展开状态
- **默认状态**：正常阴影和位置
- **悬停状态**：阴影加深，轻微上移
- **展开状态**：阴影最深，上移更多，添加边框和顶部装饰条

### 展开指示器
- **位置**：事件标题行右侧
- **样式**：圆形背景，绿色主题
- **动画**：展开时图标旋转180度
- **状态**：展开时背景色加深

### 操作区域样式
- **位置**：事件卡片底部
- **显示**：只在展开时显示
- **动画**：从上方滑入展开
- **分隔线**：使用分隔线区分内容和操作

### 按钮样式
- **编辑按钮**：绿色渐变背景 (#30a908 → #4caf50)
- **删除按钮**：橙色渐变背景 (#ff6b35 → #f7931e)
- **悬停效果**：按钮上移2px，阴影加深
- **光效动画**：悬停时显示光效扫过效果

### 动画效果
- 展开/收起动画
- 指示器旋转动画
- 卡片状态变化动画
- 按钮悬停和点击动画
- 编辑成功动画
- 删除前抖动动画
- 平滑的状态过渡

## 安全考虑

### 数据验证
- 前端表单验证
- 必填字段检查
- 数据类型验证

### 用户确认
- 删除操作需要用户确认
- 清晰的确认对话框
- 防止误操作

## 扩展功能

### 未来可添加的功能
1. **批量操作**：支持批量编辑或删除
2. **操作历史**：记录编辑和删除历史
3. **数据同步**：与后端API同步
4. **权限管理**：更细粒度的权限控制
5. **版本控制**：支持事件版本回滚
6. **拖拽排序**：支持拖拽重新排序事件
7. **手势操作**：支持滑动展开/收起

## 测试数据

当前包含两个示例用户事件：
1. **种玉米**：2025-04-15 10:00
2. **收玉米**：2025-04-25 14:00

这些事件可以在"我的参与"tab中看到，点击卡片可以展开操作按钮进行编辑和删除操作。

## 设计亮点

1. **交互创新**：采用点击展开的交互方式，保持界面整洁
2. **视觉一致性**：与整体应用风格完全一致
3. **现代化设计**：采用最新的UI设计趋势
4. **流畅动画**：丰富的动画效果提升用户体验
5. **直观操作**：清晰的操作按钮和反馈
6. **安全可靠**：完善的确认机制防止误操作
7. **状态清晰**：展开指示器明确显示当前状态 